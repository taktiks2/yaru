# タスク完了時のチェックリスト

タスクが完了した際には、以下のコマンドを順番に実行してコードの品質を確認すること。

## 1. フォーマット
```bash
just fmt
# または
cargo fmt
```

## 2. リント（自動修正あり）
```bash
just lint
# または
cargo clippy --all-targets --all-features --fix --allow-dirty -- -D warnings
```

**重要**: リントは`-D warnings`オプション付きで実行され、警告をエラーとして扱います。

## 3. フォーマット + リント（統合）
```bash
just check
```
このコマンドは`fmt`と`lint`を順番に実行します。

## 4. テスト実行
```bash
cargo test
# または特定のテストのみ
cargo test <テスト名>
```

## 5. ビルド確認
```bash
cargo build
# またはリリースビルド
cargo build --release
```

## TDD原則
- **テストを先に書く**: 期待される入出力に基づき、まずテストを作成
- テストが失敗することを確認してからコミット
- その後、テストをパスさせる実装を進める
- 実装中はテストを変更せず、コードを修正し続ける
- すべてのテストが通過するまで繰り返す

## データベース関連タスク後
マイグレーションやエンティティ変更を行った場合:

```bash
# データベースのリセット（down -> up）とシーダー実行
just db-reset

# エンティティファイルの再生成
just db-generate

# データベースリセット + エンティティ再生成
just db-refresh
```

## コミット前の最終確認
1. `just check` でフォーマットとリントをパス
2. `cargo test` ですべてのテストが成功
3. `cargo build` でビルドが成功
4. エラーメッセージがすべて日本語になっているか確認
5. ドキュメントコメント（`///`）が適切に記載されているか確認
